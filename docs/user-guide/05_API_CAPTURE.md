# ğŸ¬ API æ™ºèƒ½é‡‡é›†æŒ‡å—

> **å®Œæ•´å·¥ä½œæµç¬¬ä¸€æ­¥**ï¼šé‡‡é›† API â†’ ç¼–æ’æµç¨‹ â†’ AI ç”Ÿæˆ â†’ æ‰§è¡Œæµ‹è¯•

---

## ğŸ“‹ ç›®å½•

- [æ¦‚è¿°](#æ¦‚è¿°)
- [ä¸‰ç§é‡‡é›†æ¨¡å¼](#ä¸‰ç§é‡‡é›†æ¨¡å¼)
  - [æ¨¡å¼ 1: Playwright æµè§ˆå™¨æ’ä»¶](#æ¨¡å¼-1-playwright-æµè§ˆå™¨æ’ä»¶æ¨è)
  - [æ¨¡å¼ 2: HAR æ–‡ä»¶å¯¼å…¥](#æ¨¡å¼-2-har-æ–‡ä»¶å¯¼å…¥æœ€å¿«)
  - [æ¨¡å¼ 3: mitmproxy ä»£ç†](#æ¨¡å¼-3-mitmproxy-ä»£ç†æœ€ä¸“ä¸š)
- [é‡‡é›†åçš„å¤„ç†](#é‡‡é›†åçš„å¤„ç†)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ğŸ“– æ¦‚è¿°

API é‡‡é›†æ˜¯ä½¿ç”¨ AI TestMind çš„ç¬¬ä¸€æ­¥ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€æ­¥ã€‚é€šè¿‡é‡‡é›†ï¼Œä½ å¯ä»¥ï¼š

- ğŸ“ **è‡ªåŠ¨è®°å½•** API çš„å®Œæ•´ä¿¡æ¯ï¼ˆURLã€å‚æ•°ã€å“åº”ï¼‰
- ğŸ·ï¸ **æ™ºèƒ½åˆ†ç±»** API æŒ‰ä¸šåŠ¡é¢†åŸŸè‡ªåŠ¨å½’ç±»
- ğŸ“Š **ç”Ÿæˆ Schema** è‡ªåŠ¨è¯†åˆ«å‚æ•°ç±»å‹å’Œç»“æ„
- ğŸ’¾ **ä¿å­˜åˆ°ä»“åº“** åç»­å¯ç”¨äºç¼–æ’å’Œ AI ç”Ÿæˆ

### ğŸ¯ ä¸‰ç§æ¨¡å¼å¯¹æ¯”

| æ¨¡å¼ | é€‚ç”¨åœºæ™¯ | éš¾åº¦ | HTTPS | æ¨èåº¦ |
|------|----------|------|-------|--------|
| ğŸŒ Playwright æ’ä»¶ | Web åº”ç”¨ | ğŸŸ¢ ç®€å• | âœ… | â­â­â­â­â­ |
| ğŸ“¦ HAR å¯¼å…¥ | å·²æœ‰æŠ“åŒ… | ğŸŸ¢ ç®€å• | âœ… | â­â­â­â­ |
| ğŸ”’ mitmproxy ä»£ç† | APP/å°ç¨‹åº | ğŸŸ¡ ä¸­ç­‰ | âœ… | â­â­â­â­â­ |

---

## ğŸŒ æ¨¡å¼ 1: Playwright æµè§ˆå™¨æ’ä»¶ï¼ˆæ¨èï¼‰

### âœ¨ é€‚ç”¨åœºæ™¯
- âœ… Web åº”ç”¨æµ‹è¯•
- âœ… æœ¬åœ°å¼€å‘ç¯å¢ƒ
- âœ… å¿«é€ŸåŸå‹éªŒè¯
- âœ… æ–°æ‰‹å…¥é—¨

### ğŸš€ å¿«é€Ÿå¼€å§‹

#### 1. è®¿é—®é‡‡é›†é¡µé¢

```bash
# åœ¨æµè§ˆå™¨ä¸­è®¿é—® API é‡‡é›†é¡µé¢
http://localhost:3000/api-capture
```

#### 2. é€‰æ‹© Playwright å½•åˆ¶æ¨¡å¼

```
1. åœ¨é¡µé¢ä¸­é€‰æ‹© "Playwright æµè§ˆå™¨å½•åˆ¶" æ ‡ç­¾
2. è¾“å…¥è¦é‡‡é›†çš„ç›®æ ‡ç½‘ç«™ URLï¼ˆä¾‹å¦‚ï¼šhttp://your-app.comï¼‰
3. ç‚¹å‡» "å¼€å§‹å½•åˆ¶" æŒ‰é’®
```

è¿™å°†ï¼š
- ğŸš€ å¯åŠ¨ä¸€ä¸ª Chromium æµè§ˆå™¨çª—å£
- ğŸ“¡ è‡ªåŠ¨ç›‘å¬æ‰€æœ‰ç½‘ç»œè¯·æ±‚
- ğŸ¯ æ™ºèƒ½è¿‡æ»¤é™æ€èµ„æº
- ğŸ’¾ å®æ—¶æ˜¾ç¤ºæ•è·çš„ API

#### 3. åœ¨æµè§ˆå™¨ä¸­æ“ä½œ

åœ¨æ‰“å¼€çš„ Chromium æµè§ˆå™¨ä¸­æ­£å¸¸ä½¿ç”¨ç½‘ç«™ï¼Œæ‰€æœ‰ API è¯·æ±‚ä¼šè¢«è‡ªåŠ¨æ•è·ï¼š
- âœ… ç™»å½•
- âœ… åˆ›å»ºæ•°æ®
- âœ… æŸ¥è¯¢åˆ—è¡¨
- âœ… ä¿®æ”¹æ•°æ®
- âœ… åˆ é™¤æ•°æ®

#### 4. ä¿å­˜é‡‡é›†ç»“æœ

```
1. åœ¨ API é‡‡é›†é¡µé¢å®æ—¶æŸ¥çœ‹æ•è·çš„è¯·æ±‚
2. é€‰æ‹©éœ€è¦ä¿å­˜çš„ APIï¼ˆå¯å¤šé€‰ï¼‰
3. ç‚¹å‡» "ä¿å­˜åˆ° API ä»“åº“" æŒ‰é’®
4. è®¿é—® http://localhost:3000/api-repository æŸ¥çœ‹å·²ä¿å­˜çš„ API
```

### ğŸ¯ é«˜çº§é…ç½®

ç¼–è¾‘ `playwright.config.ts`ï¼š

```typescript
export default {
  // è®¾ç½®ä»£ç†æœåŠ¡å™¨
  proxy: {
    server: 'http://localhost:8080'
  },
  
  // è®¾ç½® User-Agent
  userAgent: 'My Custom UA',
  
  // è®¾ç½®å¿½ç•¥çš„åŸŸå
  ignoreHTTPSErrors: true,
}
```

### ğŸ“ å®é™…ç¤ºä¾‹

```bash
# 1. è®¿é—®é‡‡é›†é¡µé¢
http://localhost:3000/api-capture

# 2. é…ç½®å¹¶å¯åŠ¨å½•åˆ¶
é€‰æ‹© "Playwright æµè§ˆå™¨å½•åˆ¶"
è¾“å…¥ç›®æ ‡ URL: http://localhost:8080
ç‚¹å‡» "å¼€å§‹å½•åˆ¶"

# 3. åœ¨æ‰“å¼€çš„æµè§ˆå™¨ä¸­æ“ä½œ
- è®¿é—®ç™»å½•é¡µé¢
- è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œç‚¹å‡»ç™»å½•
- åˆ›å»ºä¸€ä¸ªè®¢å•
- æŸ¥è¯¢è®¢å•åˆ—è¡¨
- ä¿®æ”¹è®¢å•çŠ¶æ€
- åˆ é™¤è®¢å•

# 4. æŸ¥çœ‹å’Œä¿å­˜
- åœ¨é‡‡é›†é¡µé¢å®æ—¶çœ‹åˆ°æ‰€æœ‰æ•è·çš„ API
- é€‰æ‹©éœ€è¦çš„ API
- ç‚¹å‡» "ä¿å­˜åˆ° API ä»“åº“"

# 5. åœæ­¢å½•åˆ¶
ç‚¹å‡» "åœæ­¢å½•åˆ¶" æŒ‰é’®å…³é—­æµè§ˆå™¨
```

### âœ… é‡‡é›†åˆ°çš„ä¿¡æ¯

æ¯ä¸ª API ä¼šè‡ªåŠ¨è®°å½•ï¼š
```json
{
  "name": "åˆ›å»ºè®¢å•",
  "method": "POST",
  "url": "http://api.example.com/orders",
  "path": "/orders",
  "requestHeaders": {...},
  "requestBody": {...},
  "responseStatus": 200,
  "responseBody": {...},
  "responseTime": 123,
  "platform": "ç”µå•†å¹³å°",
  "component": "è®¢å•ç®¡ç†",
  "feature": "è®¢å•åˆ›å»º"
}
```

---

## ğŸ“¦ æ¨¡å¼ 2: HAR æ–‡ä»¶å¯¼å…¥ï¼ˆæœ€å¿«ï¼‰

### âœ¨ é€‚ç”¨åœºæ™¯
- âœ… å·²ç»æœ‰æŠ“åŒ…æ–‡ä»¶
- âœ… æ‰¹é‡å¯¼å…¥ API
- âœ… ä»å…¶ä»–å·¥å…·è¿ç§»
- âœ… å¿«é€ŸéªŒè¯

### ğŸš€ å¿«é€Ÿå¼€å§‹

#### 1. å¯¼å‡º HAR æ–‡ä»¶

**Chrome DevTools:**
```
1. æ‰“å¼€ Chrome DevTools (F12)
2. åˆ‡æ¢åˆ° Network æ ‡ç­¾
3. åˆ·æ–°é¡µé¢ï¼Œæ“ä½œåŠŸèƒ½
4. å³é”®ç‚¹å‡»ä»»æ„è¯·æ±‚ â†’ Save all as HAR with content
5. ä¿å­˜ä¸º xxx.har
```

**Postman:**
```
1. æ‰“å¼€ Postman
2. å‘é€è¯·æ±‚
3. ç‚¹å‡» Export â†’ HAR
```

**Fiddler:**
```
1. æ•è·æµé‡
2. File â†’ Export Sessions â†’ HTTP Archive
```

#### 2. å¯¼å…¥åˆ° AI TestMind

**æ–¹å¼ A: æ‹–æ‹½ä¸Šä¼ **
```
1. è¿›å…¥ API ä»“åº“é¡µé¢
2. ç‚¹å‡»"å¯¼å…¥ HAR"æŒ‰é’®
3. æ‹–æ‹½ .har æ–‡ä»¶åˆ°ä¸Šä¼ åŒºåŸŸ
4. ç­‰å¾…è§£æå®Œæˆ
```

**æ–¹å¼ B: API æ¥å£**
```bash
curl -X POST http://localhost:3000/api/api-library/import-har \
  -F "file=@capture.har"
```

#### 3. æŸ¥çœ‹å¯¼å…¥ç»“æœ

```
âœ… å¯¼å…¥æˆåŠŸï¼

ğŸ“Š ç»Ÿè®¡ä¿¡æ¯ï¼š
- æ€»è¯·æ±‚æ•°ï¼š156
- XHR/APIï¼š45
- é™æ€èµ„æºï¼š111ï¼ˆå·²è¿‡æ»¤ï¼‰

ğŸ’¾ å·²ä¿å­˜ï¼š45 ä¸ª API
ğŸ“ è‡ªåŠ¨åˆ†ç±»ï¼š8 ä¸ªæ¨¡å—
```

### ğŸ¯ å¯¼å…¥é…ç½®

å¯ä»¥é…ç½®å¯¼å…¥é€‰é¡¹ï¼š

```typescript
{
  // è¿‡æ»¤è§„åˆ™
  filters: {
    // åªå¯¼å…¥ API è¯·æ±‚
    includeTypes: ['xhr', 'fetch'],
    
    // æ’é™¤é™æ€èµ„æº
    excludeTypes: ['image', 'script', 'stylesheet'],
    
    // åªå¯¼å…¥ç‰¹å®šåŸŸå
    includeDomains: ['api.example.com'],
    
    // æ’é™¤ç‰¹å®šè·¯å¾„
    excludePaths: ['/static/', '/assets/']
  },
  
  // åˆ†ç±»é…ç½®
  classification: {
    // è‡ªåŠ¨è¯†åˆ«åˆ†ç±»
    auto: true,
    
    // æ‰‹åŠ¨æŒ‡å®šå¹³å°
    platform: 'ç”µå•†å¹³å°'
  }
}
```

### ğŸ“ å®é™…ç¤ºä¾‹

```bash
# 1. ä» Chrome å¯¼å‡º HAR
# æ“ä½œï¼šF12 â†’ Network â†’ åˆ·æ–° â†’ å³é”® â†’ Save as HAR

# 2. å¯¼å…¥åˆ° AI TestMind
curl -X POST http://localhost:3000/api/api-library/import-har \
  -F "file=@shopping-cart.har" \
  -F "platform=ç”µå•†å¹³å°"

# 3. æŸ¥çœ‹ç»“æœ
# è¿›å…¥ API ä»“åº“ï¼Œå¯ä»¥çœ‹åˆ°ï¼š
# - è®¢å•ç®¡ç†ï¼ˆ15 ä¸ª APIï¼‰
# - å•†å“ç®¡ç†ï¼ˆ12 ä¸ª APIï¼‰
# - ç”¨æˆ·ç®¡ç†ï¼ˆ8 ä¸ª APIï¼‰
```

---

## ğŸ”’ æ¨¡å¼ 3: mitmproxy ä»£ç†ï¼ˆæœ€ä¸“ä¸šï¼‰

### âœ¨ é€‚ç”¨åœºæ™¯
- âœ… ç§»åŠ¨ç«¯ APP
- âœ… å¾®ä¿¡å°ç¨‹åº
- âœ… HTTPS è§£å¯†
- âœ… ä¼ä¸šçº§æµ‹è¯•

### ğŸš€ å¿«é€Ÿå¼€å§‹

#### 1. å¯åŠ¨ mitmproxy

**åœ¨ Web ç•Œé¢å¯åŠ¨ï¼ˆæ¨èï¼‰ï¼š**
```bash
# 1. è®¿é—® API é‡‡é›†é¡µé¢
http://localhost:3000/api-capture

# 2. é€‰æ‹© "mitmproxy ä»£ç†å½•åˆ¶" æ¨¡å¼

# 3. ç‚¹å‡» "å¯åŠ¨ mitmproxy å½•åˆ¶" æŒ‰é’®
```

è¿™å°†å¯åŠ¨ï¼š
- ğŸ”’ mitmproxy ä»£ç†æœåŠ¡å™¨ï¼ˆç«¯å£ 8899ï¼Œå¯é…ç½®ï¼‰
- ğŸ“Š å®æ—¶ SSE æ¨é€åˆ°å‰ç«¯
- ğŸ¯ è‡ªåŠ¨é‡‡é›†æ‰€æœ‰æµé‡

#### 2. é…ç½®è®¾å¤‡

**iOS è®¾å¤‡:**
```
1. è®¾ç½® â†’ Wi-Fi â†’ ç‚¹å‡»å·²è¿æ¥çš„ç½‘ç»œ
2. é…ç½®ä»£ç† â†’ æ‰‹åŠ¨
   - æœåŠ¡å™¨ï¼šä½ çš„ç”µè„‘ IPï¼ˆå¦‚ 192.168.1.100ï¼‰
   - ç«¯å£ï¼š8899
3. æµè§ˆå™¨è®¿é—® mitm.it
4. ä¸‹è½½å¹¶å®‰è£…è¯ä¹¦
5. è®¾ç½® â†’ é€šç”¨ â†’ å…³äºæœ¬æœº â†’ è¯ä¹¦ä¿¡ä»»è®¾ç½®
6. å¼€å¯å¯¹ mitmproxy çš„å®Œå…¨ä¿¡ä»»
```

**Android è®¾å¤‡:**
```
1. è®¾ç½® â†’ WLAN â†’ é•¿æŒ‰å·²è¿æ¥ç½‘ç»œ â†’ ä¿®æ”¹ç½‘ç»œ
2. ä»£ç† â†’ æ‰‹åŠ¨
   - ä»£ç†æœåŠ¡å™¨ä¸»æœºåï¼šä½ çš„ç”µè„‘ IP
   - ä»£ç†æœåŠ¡å™¨ç«¯å£ï¼š8899
3. æµè§ˆå™¨è®¿é—® mitm.it
4. ä¸‹è½½ Android è¯ä¹¦
5. è®¾ç½® â†’ å®‰å…¨ â†’ ä»å­˜å‚¨è®¾å¤‡å®‰è£… â†’ é€‰æ‹©è¯ä¹¦
```

**å°ç¨‹åº:**
```
1. å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. è®¾ç½® â†’ ä»£ç†è®¾ç½®
   - ä»£ç†ç±»å‹ï¼šHTTP
   - ä»£ç†æœåŠ¡å™¨ï¼š127.0.0.1:8899
3. å¯ç”¨"ä¸æ ¡éªŒåˆæ³•åŸŸå"
```

**macOS/Windows æµè§ˆå™¨:**
```
# macOS
ç³»ç»Ÿè®¾ç½® â†’ ç½‘ç»œ â†’ Wi-Fi/ä»¥å¤ªç½‘ â†’ è¯¦æƒ… â†’ ä»£ç†
  â””â”€â”€ å‹¾é€‰ "ç½‘é¡µä»£ç†(HTTP)" å’Œ "å®‰å…¨ç½‘é¡µä»£ç†(HTTPS)"
      æœåŠ¡å™¨: localhost  ç«¯å£: 8899

# Windows
è®¾ç½® â†’ ç½‘ç»œå’ŒInternet â†’ ä»£ç† â†’ æ‰‹åŠ¨è®¾ç½®ä»£ç†
  â””â”€â”€ åœ°å€: localhost  ç«¯å£: 8899
```

#### 3. å¼€å§‹é‡‡é›†

```bash
# è®¾å¤‡ä¸Šæ“ä½œ APP æˆ–å°ç¨‹åº
# æ‰€æœ‰ HTTPS æµé‡éƒ½ä¼šè¢«è§£å¯†å¹¶é‡‡é›†
```

#### 4. æŸ¥çœ‹é‡‡é›†ç»“æœ

```bash
# å®æ—¶æŸ¥çœ‹æ•è·çš„è¯·æ±‚
http://localhost:3000/api-capture

# ä¿å­˜ååœ¨ API ä»“åº“æŸ¥çœ‹
http://localhost:3000/api-repository
```

**å®æ—¶æ§åˆ¶ï¼š**
- â–¶ï¸ **å¯åŠ¨å½•åˆ¶**: å¼€å§‹æ•è·æµé‡
- â¸ï¸ **æš‚åœå½•åˆ¶**: æš‚åœæ•è·ï¼ˆä¸è®°å½•æ–°è¯·æ±‚ï¼‰
- â–¶ï¸ **ç»§ç»­å½•åˆ¶**: æ¢å¤æ•è·
- â¹ï¸ **åœæ­¢å½•åˆ¶**: åœæ­¢è¿›ç¨‹ï¼Œç»“æŸä¼šè¯
- ğŸ—‘ï¸ **æ¸…ç†å…¨éƒ¨**: æ¸…ç©ºå·²æ•è·çš„æ•°æ®

### ğŸ¯ é«˜çº§é…ç½®

**è‡ªå®šä¹‰ç«¯å£ï¼š**

ç¼–è¾‘ `lib/mitmproxy-manager.ts`ï¼š

```typescript
// é»˜è®¤ç«¯å£é…ç½®
private port = 8899;

// å¯ä»¥åœ¨å¯åŠ¨æ—¶æŒ‡å®šç«¯å£
const result = await mitmManager.start({ port: 9000 });
```

**è¿‡æ»¤è§„åˆ™ï¼š**

ç¼–è¾‘ `proxy-server/mitmproxy_recorder.py`ï¼š

```python
def request(self, flow: http.HTTPFlow):
    """æ‹¦æˆªè¯·æ±‚"""
    
    # è‡ªå®šä¹‰è¿‡æ»¤é€»è¾‘
    # åªæ•è·ç‰¹å®šåŸŸå
    if 'api.example.com' not in flow.request.pretty_host:
        return
    
    # æ’é™¤é™æ€èµ„æº
    if flow.request.path.endswith(('.png', '.jpg', '.css', '.js')):
        return
    
    # åªæ•è·ç‰¹å®šæ–¹æ³•
    if flow.request.method not in ['GET', 'POST', 'PUT', 'DELETE']:
        return
    
    # ... å…¶ä»–æ•è·é€»è¾‘
```

**SSE æ¨é€é¢‘ç‡ï¼š**

ç¼–è¾‘ `lib/mitmproxy-manager.ts`ï¼š

```typescript
// æ–‡ä»¶ç›‘å¬é˜²æŠ–æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
private debounceDelay = 500;  // é»˜è®¤ 500ms
```

### ğŸ“ å®é™…ç¤ºä¾‹

```bash
# 1. åœ¨ Web ç•Œé¢å¯åŠ¨ä»£ç†
è®¿é—® http://localhost:3000/api-capture
ç‚¹å‡» "å¯åŠ¨ mitmproxy å½•åˆ¶"

# 2. é…ç½®æ‰‹æœºä»£ç†ï¼ˆæŒ‡å‘ä½ çš„ç”µè„‘ï¼‰
# iOS: 192.168.1.100:8899
# Android: 192.168.1.100:8899

# 3. å®‰è£…è¯ä¹¦ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰
# æ‰‹æœºæµè§ˆå™¨è®¿é—®ï¼šhttp://mitm.it
# ä¸‹è½½å¹¶ä¿¡ä»»è¯ä¹¦

# 4. æ‰“å¼€ APP å¹¶æ“ä½œ
# - ç™»å½•
# - æµè§ˆå•†å“
# - åŠ å…¥è´­ç‰©è½¦
# - åˆ›å»ºè®¢å•

# 5. å®æ—¶æŸ¥çœ‹é‡‡é›†çš„ API
# åœ¨ Web ç•Œé¢ä¼šè‡ªåŠ¨æ˜¾ç¤ºæ‰€æœ‰æ•è·çš„è¯·æ±‚
# æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:3000/api-library

# ç»“æœï¼š
# âœ… é‡‡é›†åˆ° 23 ä¸ª API
# ğŸ“ è‡ªåŠ¨åˆ†ç±»ï¼š
#    - ç”¨æˆ·è®¤è¯ï¼ˆ3 ä¸ªï¼‰
#    - å•†å“ç®¡ç†ï¼ˆ8 ä¸ªï¼‰
#    - è®¢å•ç®¡ç†ï¼ˆ12 ä¸ªï¼‰
```

---

## ğŸ”„ é‡‡é›†åçš„å¤„ç†

### 1. æ™ºèƒ½åˆ†ç±»

AI TestMind ä¼šè‡ªåŠ¨å¯¹é‡‡é›†çš„ API è¿›è¡Œå››å±‚åˆ†ç±»ï¼š

```
å¹³å°ï¼ˆPlatformï¼‰
  â””â”€â”€ ç»„ä»¶ï¼ˆComponentï¼‰
      â””â”€â”€ åŠŸèƒ½ï¼ˆFeatureï¼‰
          â””â”€â”€ API åŠ¨ä½œ
```

**ç¤ºä¾‹ï¼š**
```
ç”µå•†å¹³å°
  â””â”€â”€ è®¢å•ç®¡ç†
      â””â”€â”€ è®¢å•åˆ›å»º
          â”œâ”€â”€ POST /api/orders (åˆ›å»ºè®¢å•)
          â”œâ”€â”€ GET /api/orders/:id (æŸ¥è¯¢è®¢å•)
          â”œâ”€â”€ PUT /api/orders/:id (ä¿®æ”¹è®¢å•)
          â””â”€â”€ DELETE /api/orders/:id (åˆ é™¤è®¢å•)
```

### 2. ç”Ÿæˆ Schema

è‡ªåŠ¨è¯†åˆ«å‚æ•°ç±»å‹å’Œç»“æ„ï¼š

```json
{
  "requestBody": {
    "type": "object",
    "properties": {
      "productId": {
        "type": "string",
        "example": "PRD001"
      },
      "quantity": {
        "type": "integer",
        "example": 2
      },
      "price": {
        "type": "number",
        "example": 99.99
      }
    },
    "required": ["productId", "quantity"]
  }
}
```

### 3. æ·»åŠ æ ‡ç­¾

å¯ä»¥æ‰‹åŠ¨æˆ–è‡ªåŠ¨æ·»åŠ æ ‡ç­¾ï¼š

```
ğŸ·ï¸ æ ‡ç­¾ç¤ºä¾‹ï¼š
- æ ¸å¿ƒåŠŸèƒ½
- é«˜é¢‘è°ƒç”¨
- éœ€è¦ç™»å½•
- æ•°æ®ä¿®æ”¹
- æ•æ„Ÿæ“ä½œ
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. é‡‡é›†å‰çš„å‡†å¤‡

```bash
# æ¸…ç©ºæµè§ˆå™¨ç¼“å­˜
# å‡†å¤‡æµ‹è¯•æ•°æ®
# è§„åˆ’æ“ä½œæµç¨‹
```

### 2. é‡‡é›†æ—¶çš„æŠ€å·§

- âœ… **å®Œæ•´æµç¨‹**: ä»ç™»å½•åˆ°é€€å‡ºï¼Œå®Œæ•´æ“ä½œä¸€é
- âœ… **å¤šç§åœºæ™¯**: åŒ…æ‹¬æ­£å¸¸å’Œå¼‚å¸¸åœºæ™¯
- âœ… **æ…¢é€Ÿæ“ä½œ**: ç»™æ¯ä¸ªè¯·æ±‚å……åˆ†çš„æ—¶é—´
- âœ… **è®°å½•ç¬”è®°**: æ ‡è®°é‡è¦çš„ API

### 3. é‡‡é›†åçš„æ•´ç†

```bash
# 1. æ£€æŸ¥åˆ†ç±»æ˜¯å¦åˆç†
# 2. æ·»åŠ æè¿°å’Œæ ‡ç­¾
# 3. åˆ é™¤æ— ç”¨çš„ API
# 4. åˆå¹¶é‡å¤çš„ API
```

### 4. å‘½åè§„èŒƒ

```
âœ… å¥½çš„å‘½åï¼š
- åˆ›å»ºè®¢å•
- æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨
- ä¿®æ”¹å•†å“ä¿¡æ¯
- åˆ é™¤è´­ç‰©è½¦é¡¹

âŒ ä¸å¥½çš„å‘½åï¼š
- POST /api/orders
- GET request
- API_001
- test
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: Playwright é‡‡é›†å¤±è´¥

**ç—‡çŠ¶**: æµè§ˆå™¨å¯åŠ¨å¤±è´¥æˆ–æ— æ³•æ•è·è¯·æ±‚

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. ç¡®ä¿ Playwright å·²æ­£ç¡®å®‰è£…
npx playwright install chromium

# 2. æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :3000     # Next.js å‰ç«¯ç«¯å£
lsof -i :8899     # mitmproxy ç«¯å£
lsof -i :8001     # æ‰§è¡Œå™¨ç«¯å£

# 3. æ£€æŸ¥æ‰§è¡Œå™¨æ˜¯å¦è¿è¡Œ
curl http://localhost:8001/docs
# åº”è¯¥è¿”å› FastAPI æ–‡æ¡£é¡µé¢

# 4. æŸ¥çœ‹æ‰§è¡Œå™¨æ—¥å¿—
tail -f executor/executor.log
# æˆ–
tail -f logs/$(date +%Y-%m-%d)-executor.log

# 5. é‡å¯æœåŠ¡
# é‡å¯æ‰§è¡Œå™¨
cd executor
python main.py

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨å‰ç«¯
npm run build && npm run start
```

### Q2: HAR å¯¼å…¥å API æ•°é‡å¾ˆå°‘

**åŸå› **: å¯èƒ½è¿‡æ»¤æ‰äº†é™æ€èµ„æº

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// è°ƒæ•´è¿‡æ»¤è§„åˆ™
filters: {
  includeTypes: ['xhr', 'fetch', 'document'],
  excludeTypes: []  // ä¸æ’é™¤ä»»ä½•ç±»å‹
}
```

### Q3: mitmproxy è¯ä¹¦å®‰è£…å¤±è´¥

**iOS:**
```
1. ç¡®ä¿åœ¨"è®¾ç½® > é€šç”¨ > å…³äºæœ¬æœº > è¯ä¹¦ä¿¡ä»»è®¾ç½®"ä¸­å¯ç”¨
2. é‡å¯è®¾å¤‡
3. é‡æ–°è®¿é—® mitm.it ä¸‹è½½è¯ä¹¦
```

**Android:**
```
1. ç¡®ä¿è¯ä¹¦æ ¼å¼æ­£ç¡®ï¼ˆ.crt æˆ– .pemï¼‰
2. ä»"è®¾ç½® > å®‰å…¨ > åŠ å¯†ä¸å‡­æ® > ä»å­˜å‚¨è®¾å¤‡å®‰è£…"
3. å¦‚æœæ‰¾ä¸åˆ°ï¼Œå°†è¯ä¹¦ç§»åˆ° Downloads æ–‡ä»¶å¤¹
```

### Q4: å¦‚ä½•é‡‡é›†éœ€è¦ç™»å½•çš„ APIï¼Ÿ

**æ–¹æ¡ˆ A: æ‰‹åŠ¨ç™»å½•**
```
1. å¯åŠ¨é‡‡é›†
2. åœ¨æµè§ˆå™¨ä¸­æ‰‹åŠ¨ç™»å½•
3. ç»§ç»­æ“ä½œä¸šåŠ¡åŠŸèƒ½
```

**æ–¹æ¡ˆ B: å¯¼å…¥ Cookie**
```typescript
// playwright.config.ts
{
  use: {
    storageState: 'auth.json'  // é¢„å…ˆä¿å­˜çš„ç™»å½•çŠ¶æ€
  }
}
```

### Q5: API åˆ†ç±»ä¸å‡†ç¡®æ€ä¹ˆåŠï¼Ÿ

**æ‰‹åŠ¨è°ƒæ•´**:
```
1. è¿›å…¥ API ä»“åº“
2. ç‚¹å‡» API å¡ç‰‡
3. ç¼–è¾‘åˆ†ç±»ä¿¡æ¯
4. ä¿å­˜
```

**æ‰¹é‡è°ƒæ•´**:
```
1. é€‰æ‹©å¤šä¸ª API
2. ç‚¹å‡»"æ‰¹é‡æ“ä½œ"
3. ä¿®æ”¹åˆ†ç±»
4. åº”ç”¨åˆ°æ‰€æœ‰é€‰ä¸­çš„ API
```

---

## ğŸ“ è¿›é˜¶è¯é¢˜

### è‡ªå®šä¹‰é‡‡é›†è„šæœ¬

```typescript
// custom-capture.ts
import { chromium } from 'playwright';

const browser = await chromium.launch();
const context = await browser.newContext();

// ç›‘å¬æ‰€æœ‰è¯·æ±‚
context.on('request', request => {
  console.log('Request:', request.url());
});

// ç›‘å¬æ‰€æœ‰å“åº”
context.on('response', response => {
  console.log('Response:', response.url(), response.status());
});

// æ‰§è¡Œè‡ªåŠ¨åŒ–æ“ä½œ
const page = await context.newPage();
await page.goto('https://example.com');
await page.click('#login-button');
// ...

await browser.close();
```

### ä¸ CI/CD é›†æˆ

å¯ä»¥é€šè¿‡ API æ¥å£å®ç°è‡ªåŠ¨åŒ–é‡‡é›†ï¼š

```yaml
# .github/workflows/api-capture.yml
name: API Capture

on:
  schedule:
    - cron: '0 0 * * *'  # æ¯å¤©æ‰§è¡Œ

jobs:
  capture:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Install dependencies
        run: npm install
      - name: Start services
        run: |
          docker-compose up -d
          sleep 10
      - name: Trigger capture via API
        run: |
          curl -X POST http://localhost:3000/api/capture/playwright/start \
            -H "Content-Type: application/json" \
            -d '{"url": "http://your-app.com"}'
      - name: Wait for completion
        run: sleep 60
      - name: Export captured APIs
        run: |
          curl http://localhost:3000/api/api-repository/export > captured-apis.json
      - name: Upload results
        uses: actions/upload-artifact@v2
        with:
          name: captured-apis
          path: captured-apis.json
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¯è§†åŒ–ç¼–æ’æŒ‡å—](04_FLOW_ORCHESTRATION.md)
- [AI ç”ŸæˆæŒ‡å—](03_AI_GENERATION.md)
- [API ä»“åº“ç®¡ç†](02_API_REPOSITORY.md)

---

## ğŸ’¡ ä¸‹ä¸€æ­¥

é‡‡é›†å®Œ API åï¼Œä½ å¯ä»¥ï¼š

1. ğŸ“ [æ‰‹åŠ¨ç¼–æ’æµ‹è¯•æµç¨‹](04_FLOW_ORCHESTRATION.md)
2. ğŸ¤– [ä½¿ç”¨ AI è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹](03_AI_GENERATION.md)
3. âœ… [æ‰§è¡Œæµ‹è¯•å¹¶æŸ¥çœ‹ç»“æœ](06_EXECUTION.md)

---

<div align="center">

**æœ‰é—®é¢˜ï¼Ÿ**

æŸ¥çœ‹ [FAQ](../FAQ.md) æˆ–åŠ å…¥ [Discord ç¤¾åŒº](https://discord.gg/aitestmind)

[â¬…ï¸ è¿”å›æ–‡æ¡£é¦–é¡µ](../README.md)

</div>


